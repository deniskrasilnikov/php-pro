{% extends 'base.html.twig' %}

{% block navigation %}
    <li class="pure-menu-item">
        <a href="{{ path('app_crud_book_new') }}" class="book-menu-action">Add book</a>
    </li>
{% endblock %}

 {% block body %}
     <h1>Book list</h1>

     <div class="book-page-nav">
         {% if app.request.get('page') > 1 %}
             <a href="{{ path('app_crud_book_index', {'page': 1 }) }}">&lArr; First</a>
             | <a href="{{ path('app_crud_book_index', {'page': app.request.get('page') - 1 }) }}">&larr; Previous</a> |
         {% endif %}

         <a href="{{ path('app_crud_book_index', {'page': app.request.get('page', 1) + 1 }) }}">Next &rarr;</a>
     </div>

     {% if books|length %}

         {% for book in books %}
             <div class="book-info">
                 <div class="book-image">
                     <img src="{{ path('app_random_image') }}?width=100&height=150&{{ random(0, 100) }}" alt="{{ book.name }}">
                 </div>

                 <div>
                     <div class="book-name">{{ book.name }}</div>
                     <div class="book-author">By {{ book.author.fullName }}</div>

                     <span class="book-label">Type</span>{{ book.type }}<br>
                     <span class="book-label">ISBN-10</span>{{ book.isbn10|isbn10 }}<br>
                     <span class="book-label">Genres</span>{{ book.genres|column('value')|join(', ') }}<br>

                     {% if book.synopsis is defined %}
                         <span class="book-label">Synopsis</span>{{ book.synopsis }}<br>
                     {% endif %}
                 </div>
             </div>

             <div class="book-actions">
                 <a href="{{ path('app_crud_book_show', {'id': book.id }) }}">Show</a>
                 | <a href="{{ path('app_crud_book_update', {'id': book.id }) }}">Edit</a>
                 | <a href="{{ path('app_crud_book_delete', {'id': book.id }) }}"
                      onclick="return confirm('Delete book {{ book.name }}?')">Delete</a>
             </div>
         {% endfor %}

     {% else %}
         No books found
     {% endif %}

 {% endblock %}